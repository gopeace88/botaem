# 보탬e 외부 시스템 연동 분석

## 개요
- **분석일**: 2025-11-30
- **분석 대상**: 21개 docx 매뉴얼 문서
- **식별된 외부 시스템**: 6개

---

## 외부 시스템 연동 현황

### 1. 국세청 (홈택스) 연동

#### 연동 기능
| 기능 | 연동 방식 | 데이터 흐름 | 사용 화면 |
|------|----------|-------------|----------|
| 사업자등록정보 조회 | 실시간 연계 | 국세청 → 보탬e | 단체정보관리 |
| 전자세금계산서 조회 | 실시간 연계 | 홈택스 → 보탬e | 집행등록 (전자세금계산서) |

#### 상세 내용
```
[국세청] ──실시간 조회──▶ [보탬e]
   │                        │
   ├─ 사업자등록정보        ├─ 단체정보 자동입력
   └─ 전자세금계산서        └─ 집행증빙 자동연계
```

#### 자동화 포인트
- 전자세금계산서 기반 집행등록 시 증빙자료 자동 조회
- 사업자 정보 수동입력 불필요 (연계 데이터 활용)
- **"본 정보는 국세청 연계에 따라 수신된 정보입니다"** 메시지 표시

---

### 2. 펌뱅킹 (Firm Banking) 연동

#### 연동 기능
| 기능 | 연동 방식 | 데이터 흐름 | 사용 화면 |
|------|----------|-------------|----------|
| 집행이체 | 실시간 | 보탬e → 금융기관 | 집행이체관리 (93003) |
| 반환이체 | 실시간 | 보탬e → 금융기관 | 반환이체요청 (94032) |
| 교부결정취소이체 | 실시간 | 보탬e → 금융기관 | 교부결정취소이체 (92042) |
| 계좌실명확인 | 실시간 | 보탬e ↔ 금융기관 | 계좌등록 화면 |

#### 사전 요구사항
```
1. 이체인증서 등록 (화면번호: 97004)
   - 공동(범용)인증서 필수
   - 하드/이동식 디스크 또는 브라우저 인증서

2. 이체비밀번호 등록
   - 펌뱅킹 이체 시 검증용

3. 펌뱅킹이용신청 동의 (화면번호: 97005, 97008)
   - 금융정보관리 > 금융사용자환경관리 > 펌뱅킹이용신청관리
```

#### 이체 흐름
```
[보탬e 예치계좌] ──펌뱅킹──▶ [거래처 계좌]
      │                          │
      ├─ 이체비밀번호 검증       │
      └─ 인증서 인증             │
                                 ▼
                          [이체 완료/실패]
```

#### 자동화 고려사항
- **인증서 인증 필수**: 완전 자동화 어려움 (인증서 비밀번호 입력 필요)
- **이체비밀번호 검증**: 사전 등록된 비밀번호 사용
- 일괄이체 기능 존재 (배치 처리 가능)

---

### 3. e호조 (지방재정관리시스템) 연동

#### 연동 기능
| 기능 | 연동 방식 | 데이터 흐름 | 사용 화면 |
|------|----------|-------------|----------|
| 지출반납 고지서 | 연계 | 보탬e → e호조 | 징수처리 |
| 세외수입 고지서 | 연계 | 보탬e → e호조 | 징수처리 |
| 예산 구성비율 변경 | 요청 | 보탬e → e호조 | 사업변경 |

#### 상세 내용
```
[보탬e 정산반환] ──연계──▶ [e호조]
      │                       │
      ├─ 당해년도 잔액/불인정  ├─ 지출반납 고지서
      ├─ 과년도 잔액/불인정    ├─ 세외수입 고지서
      └─ 이자/수익금           └─ 세외수입 고지서
```

#### 징수입금계좌 구분
| 반환 유형 | 고지서 종류 | 처리 시스템 |
|----------|-------------|-------------|
| 당해년도 잔액/불인정 | 지출반납 | e호조 |
| 과년도 잔액/불인정 | 세외수입 | e호조 |
| 이자/수익금 | 세외수입 | e호조 |

---

### 4. elites (지방재정365) 연계로그인

#### 연동 기능
| 기능 | 연동 방식 | 비고 |
|------|----------|------|
| SSO 연계로그인 | 세션 연계 | elites → 보탬e 이동 시 재로그인 불필요 |

#### 상세 내용
- elites 시스템에서 보탬e로 이동 시 연계로그인 기능 제공
- 별도 로그인 절차 없이 세션 유지

---

### 5. 금융기관/카드사 연동

#### 연동 기능
| 기능 | 연동 방식 | 데이터 흐름 | 사용 화면 |
|------|----------|-------------|----------|
| 보조금전용카드 정보 | 야간 배치 | 카드사 → 보탬e | 보조금전용카드정보관리 (97002) |
| 카드사용내역 | 야간 배치 | 카드사 → 보탬e | 보조금전용카드사용내역관리 (97003) |
| 계좌실명확인 | 실시간 | 보탬e ↔ 은행 | 계좌등록 화면 |

#### 카드 연동 프로세스
```
[금융기관]              [보탬e]              [보조사업자]
    │                      │                      │
    │   카드 발급          │                      │
    │◀──────────────────────────────────────────│
    │                      │                      │
    │   야간 배치 (D+1)    │                      │
    │─────────────────────▶│   전용카드 등록     │
    │                      │◀─────────────────────│
    │                      │                      │
    │   카드 사용          │                      │
    │◀──────────────────────────────────────────│
    │                      │                      │
    │   사용내역 배치      │   내역 조회          │
    │─────────────────────▶│─────────────────────▶│
```

#### 주의사항
- 카드 발급 후 **D+1일**에 보탬e에서 등록 가능
- "시스템 간 데이터 연계가 이루어지는 관계로" 야간 배치 필요

---

### 6. 공동인증서 (구 공인인증서)

#### 사용 범위
| 기능 | 인증서 필요 여부 | 비고 |
|------|------------------|------|
| 이체실행 | 필수 | 공동(범용)인증서 |
| 반환이체 | 필수 | 공동(범용)인증서 |
| 전자결재 | 필수 | 지자체 담당자 |

#### 인증서 등록 방식
- 하드디스크/이동식디스크 인증서
- 브라우저 인증서

---

## 연동 시스템 요약도

```
                              ┌─────────────────┐
                              │     보탬e       │
                              │ (지방보조금관리) │
                              └────────┬────────┘
                                       │
       ┌───────────────┬───────────────┼───────────────┬───────────────┐
       │               │               │               │               │
       ▼               ▼               ▼               ▼               ▼
┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│   국세청    │ │   펌뱅킹    │ │   e호조     │ │   elites    │ │  카드사/은행 │
│   (홈택스)  │ │ (금융기관)  │ │ (지방재정)  │ │ (지방재정365)│ │             │
├─────────────┤ ├─────────────┤ ├─────────────┤ ├─────────────┤ ├─────────────┤
│• 사업자정보 │ │• 집행이체   │ │• 지출반납   │ │• 연계로그인 │ │• 전용카드   │
│• 전자세금   │ │• 반환이체   │ │• 세외수입   │ │  (SSO)      │ │• 사용내역   │
│  계산서     │ │• 계좌확인   │ │• 고지서     │ │             │ │• 계좌확인   │
├─────────────┤ ├─────────────┤ ├─────────────┤ ├─────────────┤ ├─────────────┤
│ 실시간 연계 │ │ 실시간 연계 │ │ 연계 요청   │ │ 세션 연계   │ │ 야간 배치   │
└─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘
```

---

## 자동화 영향도 분석

### 완전 자동화 가능
| 연동 시스템 | 기능 | 자동화 방안 |
|------------|------|------------|
| 국세청/홈택스 | 전자세금계산서 조회 | API 호출로 자동 조회/등록 |
| 카드사 | 카드사용내역 조회 | 배치 데이터 기반 자동 집행등록 |

### 반자동화 (인증 필요)
| 연동 시스템 | 기능 | 제약사항 |
|------------|------|---------|
| 펌뱅킹 | 이체실행 | 인증서 비밀번호 입력 필요 |
| 펌뱅킹 | 반환이체 | 이체비밀번호 + 인증서 필요 |

### 수동 처리 필요
| 연동 시스템 | 기능 | 이유 |
|------------|------|------|
| e호조 | 고지서 발행 | 지자체 내부 시스템, 직접 접근 불가 |
| elites | 연계로그인 | 사용자 세션 기반 |

---

## API 연동 설계 권장사항

### 1. 홈택스 연동 자동화
```
[RPA/자동화 도구]
    │
    ▼
[보탬e 집행등록 화면]
    │
    ├─ 전자세금계산서 조회 클릭
    ├─ 홈택스 연계 데이터 자동 로딩
    ├─ 집행정보 자동 입력
    └─ 집행요청 버튼 클릭
```

### 2. 카드사용내역 기반 자동 집행등록
```
[보탬e 카드사용내역]
    │
    ▼
[RPA 자동화]
    │
    ├─ 미사용 내역 조회
    ├─ 비목/세목 매핑 (규칙 기반)
    ├─ 집행등록 자동 생성
    └─ 집행요청 처리
```

### 3. 이체 반자동화
```
[사용자] ─인증정보제공─▶ [RPA]
                           │
                           ├─ 이체목록 조회
                           ├─ 이체비밀번호 입력
                           ├─ 인증서 선택
                           └─ 이체 실행

※ 인증서 비밀번호는 사용자 직접 입력 권장
```

---

## 다음 단계

1. **미검증 화면 추가 검증** - 9개 화면 스크린샷 대조
2. **API 엔드포인트 조사** - 국세청 OpenAPI, 금융결제원 API 등
3. **인증 방식 상세 분석** - 공동인증서 자동화 가능성 검토

---

**분석 완료일**: 2025-11-30
**버전**: 1.0
