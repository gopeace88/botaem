# 보탬e 사이트 분석 보고서

**분석 일시**: 2025-12-05
**분석 계정**: gopeace (김진희 / 알티케이)
**사이트 URL**: https://www.losims.go.kr/lss.do

---

## 1. 로그인 분석

### 1.1 로그인 페이지 구조

- **URL**: `https://www.losims.go.kr/lss.do`
- **프레임워크**: eXBuilder6 (Cleopatra)
- **로그인 방식**: 2가지
  1. 인증서 로그인 (공동인증서)
  2. 아이디 로그인 (ID/PW)

### 1.2 로그인 요소 셀렉터

| 요소 | 셀렉터 | 비고 |
|-----|-------|-----|
| 아이디 로그인 탭 | `text=아이디 로그인` | 클릭하여 탭 전환 |
| ID 입력 필드 | `input[type="text"].cl-text` | placeholder: "로그인 ID" |
| PW 입력 필드 | `input[type="password"].cl-text` | placeholder: "비밀번호" |
| 로그인 버튼 | `.btn-login:visible >> text=로그인` | 또는 `text=로그인 >> nth=0` |

### 1.3 로그인 코드 예시

```python
# 1. 아이디 로그인 탭 클릭
page.locator('text=아이디 로그인').click()
page.wait_for_timeout(500)

# 2. ID/PW 입력
page.locator('input[type="text"].cl-text').fill('user_id')
page.locator('input[type="password"].cl-text').fill('password')

# 3. 로그인 버튼 클릭
page.locator('.btn-login:visible >> text=로그인').click()
page.wait_for_timeout(3000)
```

---

## 2. 메뉴 구조 분석

### 2.1 메인 메뉴 (좌측 사이드바)

```
보탬e 메뉴 구조 (보조사업자 권한 기준)
│
├── 즐겨찾기
│
├── 보조사업선정
│   ├── 공모사업신청관리
│   └── 수행사업계획관리
│
├── 교부관리
│   └── (서브메뉴 없음 - 권한 제한)
│
├── 사업수행관리
│   ├── 수행점검관리
│   ├── 문제사업 관리
│   └── 이의신청
│
├── 정보공시관리
│   ├── 보조사업공시관리
│   └── 시정명령 관리
│
├── 금융정보관리
│   └── (서브메뉴 없음 - 권한 제한)
│
└── 사용자지원
    ├── 보조사업자온라인교육
    ├── 내정보관리
    ├── 보조사업자공지사항 (97018)
    ├── 지방보조금 FAQ (97044)
    ├── 사용자매뉴얼 (97045)
    ├── 문의게시판 (97019)
    └── 만족도조사 (97047)
```

### 2.2 메뉴 항목 CSS 클래스

| 유형 | CSS 클래스 |
|-----|-----------|
| 폴더 (펼침/접힘 가능) | `.cl-folder.cl-tree-item` |
| 리프 (최종 메뉴) | `.cl-leaf.cl-tree-item` |
| 펼쳐진 상태 | `.cl-expanded` |
| 접힌 상태 | `.cl-collapsed` |

### 2.3 메뉴 셀렉터 예시

```python
# 메인 메뉴 클릭
page.locator('text=사업수행관리').click()

# 서브 메뉴 클릭 (화면ID 포함된 경우)
page.locator('text=보조사업자공지사항 (97018)').click()
```

---

## 3. 화면 공통 요소

### 3.1 헤더 영역

| 요소 | 설명 |
|-----|------|
| 회계연도 | 드롭다운 선택 (기본: 2025) |
| 접속일시 | 실시간 표시 |
| 세션 타이머 | 60분 카운트다운 |
| 사용자 정보 | 기관명 / 사용자명 |

### 3.2 콘텐츠 영역

| 요소 | 설명 |
|-----|------|
| 전체메뉴 검색 | 메뉴 검색 입력창 |
| 자주 사용하는 메뉴 | 바로가기 (최대 6개) |
| 공지사항 | 최신 공지 목록 |

### 3.3 로딩 표시

```
"잠시만 기다려 주세요" - 페이지 로딩 시 표시
CSS: .cl-overlay, .cl-embeddedapp
```

---

## 4. 기술 스택

### 4.1 프론트엔드

- **UI 프레임워크**: eXBuilder6 (Cleopatra)
- **버전**: 1.0.3738 (2022.04.08)
- **특징**:
  - SPA (Single Page Application)
  - 커스텀 컴포넌트 기반
  - form 태그 미사용 (JavaScript 직접 처리)

### 4.2 CSS 클래스 패턴

| 패턴 | 용도 |
|-----|------|
| `cl-*` | Cleopatra 기본 컴포넌트 |
| `btn-*` | 버튼 스타일 |
| `form-field` | 폼 필드 |
| `tree-item-*` | 트리 메뉴 |

### 4.3 보안 모듈

- **TouchEnNx**: 키보드 보안
- **KSBIZ**: 공동인증서 처리

---

## 5. 자동화 시 주의사항

### 5.1 로그인

1. **탭 전환 필수**: 기본은 인증서 로그인 탭
2. **대기 시간 필요**: 각 동작 후 500~1000ms 대기
3. **세션 관리**: 60분 타임아웃

### 5.2 메뉴 네비게이션

1. **동적 로딩**: 메뉴 클릭 후 콘텐츠 로딩 대기 필요
2. **권한별 메뉴**: 사용자 권한에 따라 보이는 메뉴가 다름
3. **화면ID**: 일부 메뉴에 화면ID 표시 (예: 97018)

### 5.3 요소 선택

1. **ID 동적 생성**: `uuid-*` 형태로 매번 변경됨
2. **텍스트 기반 선택 권장**: `text=메뉴명` 사용
3. **클래스 조합**: `.cl-button:visible` 등 조합 사용

---

## 6. 매뉴얼과의 차이점

### 6.1 확인된 메뉴 vs 매뉴얼

| 매뉴얼 메뉴 | 실제 확인 | 비고 |
|-----------|---------|-----|
| 회원관리 | X | 권한 제한 |
| 보조사업선정 | O | 일부 서브메뉴 확인 |
| 교부관리 | △ | 메뉴는 있으나 서브메뉴 없음 |
| 집행관리 | X | 사업수행관리로 통합? |
| 정산관리 | X | 권한 제한 |

### 6.2 권한 문제

현재 계정(gopeace)은 **보조사업자** 권한으로,
집행/정산 관련 메뉴가 제한되어 있습니다.

전체 메뉴 구조 확인을 위해서는 **관리자 권한** 계정이 필요합니다.

---

## 7. 다음 단계

1. **관리자 권한 계정으로 재분석** - 전체 메뉴 구조 파악
2. **주요 화면별 요소 추출** - 집행등록, 카드사용내역 등
3. **녹화 기반 자동화 구현** - Playwright Codegen 활용
4. **매뉴얼과 실제 GUI 매핑** - 차이점 문서화

---

## 첨부 파일

- `output/menus/` - 메뉴 탐색 스크린샷 및 JSON
- `output/public/` - 로그인 페이지 분석
- `debug_success.png` - 로그인 성공 화면

---

**작성**: Claude (AI Assistant)
**검토**: (사용자 검토 필요)
