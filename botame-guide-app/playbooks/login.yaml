# 보탬e 로그인 플레이북
# 검증 완료: 2025-12-05

metadata:
  id: "botame-login"
  name: "보탬e 로그인"
  version: "1.0.0"
  description: "아이디/비밀번호로 보탬e 업무시스템에 로그인합니다."
  category: "회원관리"
  difficulty: "쉬움"
  estimated_time: "10초"
  keywords: ["로그인", "인증", "접속"]
  author: "Claude"
  last_updated: "2025-12-05"

variables:
  user_id:
    type: "string"
    label: "사용자 ID"
    required: true
    default: "gopeace"
  password:
    type: "string"
    label: "비밀번호"
    required: true
    default: "gopeace123!"

preconditions:
  - check: "브라우저가 실행되어 있어야 합니다"
    message: "브라우저를 먼저 실행해주세요"
    action: "block"

steps:
  - id: "navigate"
    action: "navigate"
    value: "https://www.losims.go.kr/lss.do"
    message: "보탬e 업무시스템으로 이동합니다"
    wait_for: "navigation"
    timeout: 30000

  - id: "wait_load"
    action: "wait"
    wait_for: "network"
    timeout: 5000
    message: "페이지 로딩을 기다립니다"

  - id: "click_id_tab"
    action: "click"
    selector: "text=아이디 로그인"
    message: "아이디 로그인 탭을 클릭합니다"
    timeout: 5000
    verify:
      success_selector: "input[type='text'].cl-text"
      condition: "ID 입력 필드가 표시되어야 합니다"

  - id: "wait_tab"
    action: "wait"
    timeout: 500
    message: "탭 전환을 기다립니다"

  - id: "input_id"
    action: "type"
    selector: "input[type='text'].cl-text"
    value: "{{user_id}}"
    message: "사용자 ID를 입력합니다"
    verify:
      condition: "ID가 입력되어야 합니다"

  - id: "input_password"
    action: "type"
    selector: "input[type='password'].cl-text"
    value: "{{password}}"
    message: "비밀번호를 입력합니다"
    verify:
      condition: "비밀번호가 입력되어야 합니다"

  - id: "click_login"
    action: "click"
    selector: ".btn-login:visible >> text=로그인"
    message: "로그인 버튼을 클릭합니다"
    timeout: 5000
    on_error: "retry"

  - id: "wait_login"
    action: "wait"
    wait_for: "network"
    timeout: 10000
    message: "로그인 처리를 기다립니다"

  - id: "verify_login"
    action: "assert"
    message: "로그인 성공 여부를 확인합니다"
    verify:
      success_selector: "text=님 좋은 하루입니다"
      success_text: "좋은 하루입니다"
      condition: "메인 화면이 표시되어야 합니다"

error_handlers:
  - match: "로그인 실패"
    action: "guide"
    message: "아이디 또는 비밀번호를 확인해주세요"

  - match: "timeout"
    action: "retry"
    message: "응답이 늦어지고 있습니다. 다시 시도합니다"

  - match: "세션 만료"
    action: "abort"
    message: "세션이 만료되었습니다. 다시 로그인해주세요"
